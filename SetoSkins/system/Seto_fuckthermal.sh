#!/system/bin/sh
MODDIR=${0%/*}
var_device=$(getprop ro.product.device)
status=$(cat /sys/class/power_supply/battery/status)
capacity=$(cat /sys/class/power_supply/battery/capacity)
temp=$(expr $(cat /sys/class/power_supply/battery/temp) / 10)
ChargemA=$(expr $(cat /sys/class/power_supply/battery/current_now) / -1000)
cp "$MODDIR"/‰ΩúËÄÖQQÊçêËµ†ÂèëÁîµÁî®.jpg /data/adb/modules/SetoSkins/
show_value() {
	value=$1
	file=/data/adb/modules/SetoSkins/ÈÖçÁΩÆ.prop
	cat "${file}" | grep -E "(^$value=)" | sed '/^#/d;/^[[:space:]]*$/d;s/.*=//g' | sed 's/Ôºå/,/g;s/‚Äî‚Äî/-/g;s/Ôºö/:/g' | head -n 1
}
if test $(show_value 'Ê∏©ÊéßÈÖçÁΩÆ') == ‰∏ç‰øùÁïô && $(show_value 'Ê£ÄÊµãmi_thermald‰∏¢Â§±Ëá™Âä®‰øùÊ¥ª') == true; then
	while true; do
		echo $(date)" ËÑëÁò´Â∞±Âà´Áî®ÊàëÊ®°Âùó‰∫Üüòã" >>"$MODDIR"/log.log
		sed -i "/^description=/c description=ËÑëÁò´Â∞±Âà´Áî®ÊàëÊ®°Âùó‰∫Üüòã" "$MODDIR/module.prop"
		echo $(date)" ËÑëÁò´Â∞±Âà´Áî®ÊàëÊ®°Âùó‰∫Üüòã" >>"$MODDIR"/ÈÖçÁΩÆ.prop
	done
fi
if test $(show_value 'Ê∏©ÊéßÈÖçÁΩÆ') == ‰∏ç‰øùÁïô; then
	setprop ctl.stop thermal-engine
	setprop ctl.stop mi_thermald
	setprop ctl.stop thermal_manager
	setprop ctl.stop thermal
	setprop ctl.stop thermald
    mkdir -p $MODDIR/vendor/etc
	chattr -R -i -a /data/vendor/thermal/
	rm -rf "$MODDIR"/vendor/etc/*
	rm -rf /data/vendor/thermal/config/*
	#‰∫ëÁ´Ø
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/bin/mi_thermal"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-normal.conf"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-class0.conf"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-nolimits.conf"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-tgame.conf"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-mgame.conf"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-yuanshen.conf"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-video.conf"

	#Êú¨Âú∞
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-normal.conf"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc//thermal-class0.conf"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-nolimits.conf"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-tgame.conf"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-mgame.conf"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-yuanshen.conf"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-video.conf"
	chmod 777 /sys/class/thermal/thermal_message/sconfig
	if [[ $var_device == "xaga" ]]; then
		#‰∫ëÁ´Ø
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-l16u-normal.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-l16u-class0.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-l16u-nolimits.conf.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-l16u-tgame.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-l16u-mgame.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-l16u-video.conf"
		#Êú¨Âú∞
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-l16u-normal.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-l16u-class0.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-l16u-nolimits.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-l16u-tgame.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-l16u-mgame.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-l16u-video.conf"
	fi
	if [[ $var_device == "star" ]]; then
		#‰∫ëÁ´Ø
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-k1a-normal.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-k1a-class0.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-k1a-nolimits.conf.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-k1a-tgame.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-k1a-mgame.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-k1a-video.conf"
		#Êú¨Âú∞
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-k1a-normal.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-k1a-class0.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-k1a-nolimits.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-k1a-tgame.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-k1a-mgame.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-k1a-video.conf"
	fi
elif
	test $(show_value 'Ê∏©ÊéßÈÖçÁΩÆ') == ‰øùÁïô
then
	setprop ctl.restart thermal-engine
	setprop ctl.restart mi_thermald
	setprop ctl.restart thermal_manager
	setprop ctl.restart thermal
	mkdir -p $MODDIR/vendor/etc
	rm -rf "$MODDIR"/vendor/etc/*
	rm -rf /data/vendor/thermal/config/*
	chattr -R -i -a /data/vendor/thermal/
	#‰∫ëÁ´Ø
	cp "$MODDIR/cloud/thermal/thermal-normal.conf" "/data/vendor/thermal/config/thermal-normal.conf"
	cp "$MODDIR/cloud/thermal/thermal-normal.conf" "/data/vendor/thermal/config/thermal-class0.conf"
	cp "$MODDIR/cloud/thermal/thermal-normal.conf" "/data/vendor/thermal/config/thermal-nolimits.conf"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-tgame.conf"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-mgame.conf"
	cp "$MODDIR/cloud/thermal/thermal-normal.conf" "/data/vendor/thermal/config/thermal-yuanshen.conf"
	cp "$MODDIR/cloud/thermal/thermal-normal.conf" "/data/vendor/thermal/config/thermal-video.conf"

	#Êú¨Âú∞
	cp "$MODDIR/cloud/thermal/thermal-normal.conf" "$MODDIR/vendor/etc/thermal-normal.conf"
	cp "$MODDIR/cloud/thermal/thermal-normal.conf" "$MODDIR/vendor/etc//thermal-class0.conf"
	cp "$MODDIR/cloud/thermal/thermal-normal.conf" "$MODDIR/vendor/etc/thermal-nolimits.conf"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-tgame.conf"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-mgame.conf"
	cp "$MODDIR/cloud/thermal/thermal-normal.conf" "$MODDIR/vendor/etc/thermal-yuanshen.conf"
	cp "$MODDIR/cloud/thermal/thermal-normal.conf" "$MODDIR/vendor/etc/thermal-video.conf"

	if [[ $var_device == "xaga" ]]; then
		#‰∫ëÁ´Ø
		cp "$MODDIR/cloud/thermal/thermal-normal.conf" "/data/vendor/thermal/config/thermal-l16u-normal.conf"
		cp "$MODDIR/cloud/thermal/thermal-normal.conf" "/data/vendor/thermal/config/thermal-l16u-class0.conf"
		cp "$MODDIR/cloud/thermal/thermal-normal.conf" "/data/vendor/thermal/config/thermal-l16u-nolimits.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-l16u-tgame.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-l16u-mgame.conf"
		cp "$MODDIR/cloud/thermal/thermal-normal.conf" "/data/vendor/thermal/config/thermal-l16u-video.conf"
		#Êú¨Âú∞
		cp "$MODDIR/cloud/thermal/thermal-normal.conf" "$MODDIR/vendor/etc/thermal-l16u-normal.conf"
		cp "$MODDIR/cloud/thermal/thermal-normal.conf" "$MODDIR/vendor/etc/thermal-l16u-class0.conf"
		cp "$MODDIR/cloud/thermal/thermal-normal.conf" "$MODDIR/vendor/etc/thermal-l16u-nolimits.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-l16u-tgame.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-l16u-mgame.conf"
		cp "$MODDIR/cloud/thermal/thermal-normal.conf" "$MODDIR/vendor/etc/thermal-l16u-video.conf.conf"
	fi
	if [[ $var_device == "star" ]]; then
		#‰∫ëÁ´Ø
		cp "$MODDIR/cloud/thermal/thermal-normal.conf" "/data/vendor/thermal/config/thermal-k1a-normal.conf"
		cp "$MODDIR/cloud/thermal/thermal-normal.conf" "/data/vendor/thermal/config/thermal-k1a-class0.conf"
		cp "$MODDIR/cloud/thermal/thermal-normal.conf" "/data/vendor/thermal/config/thermal-k1a-nolimits.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-k1a-tgame.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-k1a-mgame.conf"
		cp "$MODDIR/cloud/thermal/thermal-normal.conf" "/data/vendor/thermal/config/thermal-k1a-video.conf"
		#Êú¨Âú∞
		cp "$MODDIR/cloud/thermal/thermal-normal.conf" "$MODDIR/vendor/etc/thermal-k1a-normal.conf"
		cp "$MODDIR/cloud/thermal/thermal-normal.conf" "$MODDIR/vendor/etc/thermal-k1a-class0.conf"
		cp "$MODDIR/cloud/thermal/thermal-normal.conf" "$MODDIR/vendor/etc/thermal-k1a-nolimits.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-k1a-tgame.conf"
		cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-k1a-mgame.conf"
		cp "$MODDIR/cloud/thermal/thermal-normal.conf" "$MODDIR/vendor/etc/thermal-k1a-video.conf.conf"
	fi
	chmod 777 /sys/class/thermal/thermal_message/sconfig
fi
if test $(show_value 'ÂàáÊç¢‰∫ëÁ´ØÊàñÊú¨Âú∞ÈÖçÁΩÆ') == Êú¨Âú∞; then
	rm -rf /data/vendor/thermal/config/*
elif
	test $(show_value 'ÂàáÊç¢‰∫ëÁ´ØÊàñÊú¨Âú∞ÈÖçÁΩÆ') == ‰∫ëÁ´Ø
then
	rm -rf "$MODDIR"/vendor/etc/
fi
if test $(show_value 'ÂÖ≥Èó≠ÂΩïÂà∂4KÊ∏©Êéß') == true; then
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-4K.conf"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-4K.conf"
	elif
	test $(show_value 'ÂÖ≥Èó≠ÂΩïÂà∂4KÊ∏©Êéß') == false
	then
	rm -rf /data/vendor/thermal/config/thermal-4K.conf
	rm -rf $MODDIR/vendor/etc/thermal-4K.conf
fi
if test $(show_value 'ÂÖ≥Èó≠Áõ∏Êú∫Ê∏©Êéß') == true; then
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "/data/vendor/thermal/config/thermal-camera.conf"
	cp "$MODDIR/cloud/thermal/thermal-per-huanji.conf" "$MODDIR/vendor/etc/thermal-camera.conf"
	elif
	test $(show_value 'ÂÖ≥Èó≠Áõ∏Êú∫Ê∏©Êéß') == false
	then
	rm -rf /data/vendor/thermal/config/thermal-camera.conf
	rm -rf $MODDIR/vendor/etc/thermal-camera.conf
fi
if test $(show_value 'ÂºÄÂêØ‰øÆÊîπÁîµÊµÅÊï∞') == true; then
	b=$(grep "ÊúÄÂ§ßÁîµÊµÅÊï∞" "$file" | cut -c6-)
	echo "$b" >/sys/class/power_supply/usb/current_max
	echo "$b" >/sys/class/power_supply/battery/constant_charge_current
fi

if test $(show_value 'ÂºÄÂêØÂÖÖÁîµË∞ÉÈÄü') == true; then
	cp "$MODDIR/temp_threshold.sh" "/data/adb/service.d/Seto_temp_threshold.sh"
elif
	test $(show_value 'ÂºÄÂêØÂÖÖÁîµË∞ÉÈÄü') == false
then
	rm -rf /data/adb/service.d/Seto_temp_threshold.sh
fi

if test $(show_value 'ÂÖ≥Èó≠millet') == true; then
	cp "$MODDIR/cloud/post-fs-data.sh" "/data/adb/modules/SetoSkins/post-fs-data.sh"
elif
	test $(show_value 'ÂÖ≥Èó≠millet') == false
then
		rm -rf /data/adb/modules/SetoSkins/post-fs-data.sh
		fi
		
if test $(show_value 'ÂÖ®Â±ÄÈ´òÂà∑ÔºàÂíådfpsÂÜ≤Á™Åmiui14Ëá™ÊµãÔºâ') == true; then
	settings put system min_refresh_rate 120
	elif
 test $(show_value 'ÂÖ®Â±ÄÈ´òÂà∑ÔºàÂíådfpsÂÜ≤Á™Åmiui14Ëá™ÊµãÔºâ') == false
 then
	settings put system min_refresh_rate 60
fi
if test $(show_value 'È≠îÊîπÁîµÈáè‰∏éÊÄßËÉΩÔºàÈÉ®ÂàÜÊú∫ÂûãÊä•ÈîôÊó†Ê≥ï‰ΩøÁî®Ôºâ') == true; then
	mkdir -p $MODDIR/app
	cp -r "$MODDIR/cloud/ÁîµÈáè‰∏éÊÄßËÉΩ/app/" "$MODDIR"
elif
test $(show_value 'È≠îÊîπÁîµÈáè‰∏éÊÄßËÉΩÔºàÈÉ®ÂàÜÊú∫ÂûãÊä•ÈîôÊó†Ê≥ï‰ΩøÁî®Ôºâ') == false
then
rm -rf $MODDIR/app/PowerKeeper*
fi
if test $(show_value 'È≠îÊîπjoyose') == true; then
	mkdir -p $MODDIR/app
	cp -r "$MODDIR/cloud/joyose/app/" "$MODDIR"
elif
test $(show_value 'È≠îÊîπjoyose') == false
then
rm -rf $MODDIR/app/Joyose*
fi